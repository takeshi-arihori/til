# ECSの学習

## 学習内容
### 技術
- コンテナアプリの背景と起訴
- マイクロサービスアーキテクチャ
- CICDパイプライン
- 状態管理
- デプロイ手法
- オートスケーリング
- ネットワーク

### フェーズ
- 基礎
- 設計・開発
- リリース
- 運用

## コンテナアプリケーション開発の基本
### コンテナとは??
- アプリケーションとそれに必要な周辺ソフトウェアをパッケージ化したもの
ホストマシンから隔離されているため影響を受けない。
持ち運び可能。
- 開発環境の統一
- スケーラビリティ: コンテナを増やすことで簡単にアプリをスケールできる
- CI/CDとの相性: テスト -> そのまま本番環境にデプロイできる

### スケーリング
システムの利用者の増大に応じて、システム規模を拡大縮小すること。スケーラビリティ = スケールのしやすさ
コンテナは即立ち上げ可能なため、ユーザーが増えたらスケールさせることが容易。
一つのホストマシンだと、CPUやメモリが足りなくなるが、AWSなどクラウドインフラだとクリック一つで増やせるためコンテナと相性がいい。

### コンテナオーケストレーション
ユーザーの増減に応じてコンテナを増やしたり減らしたりをする必要がある。1台のサーバではできないため複数サーバを用意する必要がある。
どのサーバに配置するかを解決してくれるのがコンテナオーケストレータ。
CPUメモリリソース・負荷状況を監視 -> どのサーバに配置するのが最適か・効率的か判断、不要なコンテナを破棄。

### ECSの基本構造
![learn-ecs drawio](https://github.com/user-attachments/assets/f1efd6ac-a48f-4fcb-afd7-9dc29f2a8941)

TaskはServiceの中でなく単体でも可能
Taskが最小単位としてコンテナデプロイを行っている。
Task = 1つ以上持たせることが可能。
#### Task定義: Taskそのものの設計図で、Taskを作成し、ECSに与えることで作りたいコンテナを作成。(Json)
コンテナ設定・リソース設定・環境変数・ログ設定などコンテナに必要なものを定義

#### Service
Taskの状態・個数を理想状態に維持する
- Taskの維持管理
- スケーリング
- 負荷分散
- アップデートとデプロイ

### ECSの作成手順
Cluster -> Service -> Task

### ECSの実行環境
1. EC2ベースの実行環境
   - 高い柔軟性
   - コスト最適
   - OS等管理コストがかかる
2. Fargateの実行環境
   - サーバレスでOS等管理が不要
   - シンプルで簡単に始めやすい
   - 柔軟性が低い

### ECR
コンテナイメージを格納、管理、デプロイするためのAWSサービス。
コンテナイメージの保存・管理を可能にする = コンテナイメージレジストリの一種。

