# EC2キーペア再設定の手順

AWSのEC2インスタンスに使用するキーペアは作成時に一度だけダウンロード可能です。既存のキーペアを再度ダウンロードすることはできません。しかし、新しいキーペアを作成し、それをEC2インスタンスに追加することで同様の操作が可能になります。

## 新しいキーペアの作成と追加手順
1. 新しいキーペアの作成
AWS管理コンソールにログインし、以下の手順で新しいキーペアを作成します：

- EC2ダッシュボードに移動: ナビゲーションペインの「ネットワーク & セキュリティ」セクションで「キーペア」を選択します。
- キーペアの作成をクリックします。
- キーペアの名前を入力し、キーペアの種類は「RSA」、プライベートキーファイル形式は「.pem」を選択します。
- キーペアの作成をクリックすると、.pemファイルがダウンロードされます。このファイルを安全に保管してください。

2. EC2インスタンスへの公開鍵の追加
新しいキーペアの公開鍵をEC2インスタンスに追加するには、以下の手順を実行します：

新しい公開鍵を取得: ローカルで新しいキーペアの公開鍵を表示します。

```
ssh-keygen -y -f ~/.ssh/your-new-key.pem
```
このコマンドの出力が新しい公開鍵です。

EC2インスタンスに接続: AWS管理コンソールを使用して、EC2インスタンスのコンソールに接続します。
`接続 → EC2 Instance Connect を使用して接続する`

公開鍵を追加: `~/.ssh/authorized_keys`ファイルに新しい公開鍵を追加します。

```
echo "ssh-rsa AAAAB3...（公開鍵の内容）" >> ~/.ssh/authorized_keys
```
パーミッションの確認: authorized_keysファイルのパーミッションを設定します。

```
chmod 600 ~/.ssh/authorized_keys
```

3. 新しいキーペアを使用して接続
新しいキーペアを使用してSSH接続を試みます。

```
ssh -i ~/.ssh/your-new-key.pem ubuntu@<パブリック IPv4 DNS>
```

これで新しいキーペアを使用してEC2インスタンスに接続できるはずです。
